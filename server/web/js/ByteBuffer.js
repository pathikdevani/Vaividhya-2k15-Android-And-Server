(function(e){"use strict";function t(e){function s(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(var r=0,i=e.length;r<i;++r)n[r]=e[r];return t}var t=null;if(typeof require==="function"){try{var n=require("buffer");t=n&&typeof n["Buffer"]==="function"&&typeof n["Buffer"]["isBuffer"]==="function"?n["Buffer"]:null}catch(r){}}var i=function(e,t,n){e=typeof e!=="undefined"?parseInt(e,10):i.DEFAULT_CAPACITY;if(e<1)e=i.DEFAULT_CAPACITY;this.array=n?null:new ArrayBuffer(e);this.view=n?null:new DataView(this.array);this.offset=0;this.markedOffset=-1;this.length=0;this.littleEndian=typeof t!="undefined"?!!t:false};i.VERSION="2.3.1";i.DEFAULT_CAPACITY=16;i.LITTLE_ENDIAN=true;i.BIG_ENDIAN=false;i.Long=e||null;i.isByteBuffer=function(e){return e&&(e instanceof i||typeof e==="object"&&(e.array===null||e.array instanceof ArrayBuffer)&&(e.view===null||e.view instanceof DataView)&&typeof e.offset==="number"&&typeof e.markedOffset==="number"&&typeof e.length==="number"&&typeof e.littleEndian==="boolean")};i.allocate=function(e,t){return new i(e,t)};i.wrap=function(e,n,r){if(typeof n==="boolean"){r=n;n="utf8"}if(typeof e==="string"){switch(n){case"base64":return i.decode64(e,r);case"hex":return i.decodeHex(e,r);case"binary":return i.decodeBinary(e,r);default:return(new i(i.DEFAULT_CAPACITY,r)).writeUTF8String(e).flip()}}var o;if(t&&t.isBuffer(e)){o=(new Uint8Array(e)).buffer;e=o===e?s(e):o}if(e===null||typeof e!=="object"){throw new Error("Cannot wrap null or non-object")}if(i.isByteBuffer(e)){return i.prototype.clone.call(e)}if(!!e["array"]){e=e["array"]}else if(!!e["buffer"]){e=e["buffer"]}if(!(e instanceof ArrayBuffer)){throw new Error("Cannot wrap buffer of type "+typeof e+", "+e.constructor.name)}o=new i(0,r,true);o.array=e;o.view=o.array.byteLength>0?new DataView(o.array):null;o.offset=0;o.length=e.byteLength;return o};i.prototype.LE=function(e){this.littleEndian=typeof e!=="undefined"?!!e:true;return this};i.prototype.BE=function(e){this.littleEndian=typeof e!=="undefined"?!e:false;return this};i.prototype.resize=function(e){if(e<1)return false;if(this.array===null){this.array=new ArrayBuffer(e);this.view=new DataView(this.array)}if(this.array.byteLength<e){var t=this.array;var n=new Uint8Array(t);var r=new ArrayBuffer(e);var i=new Uint8Array(r);i.set(n);this.array=r;this.view=new DataView(r)}return this};i.prototype.slice=function(e,t){if(this.array==null){throw new Error(this+" cannot be sliced: Already destroyed")}if(typeof e==="undefined")e=this.offset;if(typeof t==="undefined")t=this.length;if(t<=e){var n=t;t=e;e=n}if(e<0||e>this.array.byteLength||t<1||t>this.array.byteLength){throw new Error(this+" cannot be sliced: Index out of bounds (0-"+this.array.byteLength+" -> "+e+"-"+t+")")}var r=this.clone();r.offset=e;r.length=t;return r};i.prototype.ensureCapacity=function(e){if(this.array===null)return this.resize(e);if(this.array.byteLength<e)return this.resize(this.array.byteLength*2>=e?this.array.byteLength*2:e);return this};i.prototype.flip=function(){this.length=this.array==null?0:this.offset;this.offset=0;return this};i.prototype.mark=function(e){if(this.array==null){throw new Error(this+" cannot be marked: Already destroyed")}e=typeof e!=="undefined"?parseInt(e,10):this.offset;if(e<0||e>this.array.byteLength){throw new Error(this+" cannot be marked: Offset to mark is less than 0 or bigger than the capacity ("+this.array.byteLength+"): "+e)}this.markedOffset=e;return this};i.prototype.reset=function(){if(this.array===null){throw new Error(this+" cannot be reset: Already destroyed")}if(this.markedOffset>=0){this.offset=this.markedOffset;this.markedOffset=-1}else{this.offset=0;this.length=0}return this};i.prototype.clone=function(){var e=new i(-1,this.littleEndian,true);e.array=this.array;e.view=this.view;e.offset=this.offset;e.markedOffset=this.markedOffset;e.length=this.length;return e};i.prototype.copy=function(){if(this.array==null){return this.clone()}var e=new i(this.array.byteLength,this.littleEndian);var t=new Uint8Array(this.array);var n=new Uint8Array(e.array);n.set(t);e.offset=this.offset;e.markedOffset=this.markedOffset;e.length=this.length;return e};i.prototype.remaining=function(){if(this.array===null)return 0;return this.length-this.offset};i.prototype.capacity=function(){return this.array!=null?this.array.byteLength:0};i.prototype.compact=function(){if(this.array==null){throw new Error(this+" cannot be compacted: Already destroyed")}if(this.offset>this.length){this.flip()}if(this.offset===this.length){this.array=new ArrayBuffer(0);this.view=null;return this}if(this.offset===0&&this.length===this.array.byteLength){return this}var e=new Uint8Array(this.array);var t=new ArrayBuffer(this.length-this.offset);var n=new Uint8Array(t);n.set(e.subarray(this.offset,this.length));this.array=t;if(this.markedOffset>=this.offset){this.markedOffset-=this.offset}else{this.markedOffset=-1}this.offset=0;this.length=this.array.byteLength;return this};i.prototype.destroy=function(){if(this.array!==null){this.array=null;this.view=null;this.offset=0;this.markedOffset=-1;this.length=0}return this};i.prototype.reverse=function(){if(this.array===null){throw new Error(this+" cannot be reversed: Already destroyed")}Array.prototype.reverse.call(new Uint8Array(this.array));var e=this.offset;this.offset=this.array.byteLength-this.length;this.markedOffset=-1;this.length=this.array.byteLength-e;this.view=new DataView(this.array);return this};i.prototype.append=function(e,t){if(!(e instanceof i)){e=i.wrap(e)}if(e.array===null){throw new Error(e+" cannot be appended to "+this+": Already destroyed")}var n=e.length-e.offset;if(n==0)return this;if(n<0){e=e.clone().flip();n=e.length-e.offset}t=typeof t!=="undefined"?t:(this.offset+=n)-n;this.ensureCapacity(t+n);var r=new Uint8Array(e.array);var s=new Uint8Array(this.array);s.set(r.subarray(e.offset,e.length),t);return this};i.prototype.prepend=function(e,t){if(!(e instanceof i)){e=i.wrap(e)}if(e.array===null){throw e+" cannot be prepended to "+this+": Already destroyed"}var n=e.length-e.offset;if(n==0)return this;if(n<0){e=e.clone().flip();n=e.length-e.offset}var r=typeof t==="undefined";t=typeof t!=="undefined"?t:this.offset;var s=n-t;if(s>0){this.ensureCapacity(this.length+s);this.append(this,n);this.offset+=s;this.length+=s;this.append(e,0)}else{this.append(e,t-n)}if(r){this.offset-=n}return this};i.prototype.writeInt8=function(e,t){t=typeof t!="undefined"?t:(this.offset+=1)-1;this.ensureCapacity(t+1);this.view.setInt8(t,e);return this};i.prototype.readInt8=function(e){e=typeof e!=="undefined"?e:(this.offset+=1)-1;if(e>=this.array.byteLength){throw new Error("Cannot read int8 from "+this+" at "+e+": Capacity overflow")}return this.view.getInt8(e)};i.prototype.writeByte=i.prototype.writeInt8;i.prototype.readByte=i.prototype.readInt8;i.prototype.writeUint8=function(e,t){t=typeof t!=="undefined"?t:(this.offset+=1)-1;this.ensureCapacity(t+1);this.view.setUint8(t,e);return this};i.prototype.readUint8=function(e){e=typeof e!=="undefined"?e:(this.offset+=1)-1;if(e+1>this.array.byteLength){throw new Error("Cannot read uint8 from "+this+" at "+e+": Capacity overflow")}return this.view.getUint8(e)};i.prototype.writeInt16=function(e,t){t=typeof t!=="undefined"?t:(this.offset+=2)-2;this.ensureCapacity(t+2);this.view.setInt16(t,e,this.littleEndian);return this};i.prototype.readInt16=function(e){e=typeof e!=="undefined"?e:(this.offset+=2)-2;if(e+2>this.array.byteLength){throw new Error("Cannot read int16 from "+this+" at "+e+": Capacity overflow")}return this.view.getInt16(e,this.littleEndian)};i.prototype.writeShort=i.prototype.writeInt16;i.prototype.readShort=i.prototype.readInt16;i.prototype.writeUint16=function(e,t){t=typeof t!=="undefined"?t:(this.offset+=2)-2;this.ensureCapacity(t+2);this.view.setUint16(t,e,this.littleEndian);return this};i.prototype.readUint16=function(e){e=typeof e!=="undefined"?e:(this.offset+=2)-2;if(e+2>this.array.byteLength){throw new Error("Cannot read int16 from "+this+" at "+e+": Capacity overflow")}return this.view.getUint16(e,this.littleEndian)};i.prototype.writeInt32=function(e,t){t=typeof t!=="undefined"?t:(this.offset+=4)-4;this.ensureCapacity(t+4);this.view.setInt32(t,e,this.littleEndian);return this};i.prototype.writeUTF=function(e){this.writeInt16(e.length);this.writeUTF8String(e)};i.prototype.readInt32=function(e){e=typeof e!=="undefined"?e:(this.offset+=4)-4;if(e+4>this.array.byteLength){throw new Error("Cannot read int32 from "+this+" at "+e+": Capacity overflow")}return this.view.getInt32(e,this.littleEndian)};i.prototype.readUTF=function(){var e=this.readInt16();return this.readUTF8StringBytes(e)};i.prototype.writeInt=i.prototype.writeInt32;i.prototype.readInt=i.prototype.readInt32;i.prototype.writeUint32=function(e,t){t=typeof t!="undefined"?t:(this.offset+=4)-4;this.ensureCapacity(t+4);this.view.setUint32(t,e,this.littleEndian);return this};i.prototype.readUint32=function(e){e=typeof e!=="undefined"?e:(this.offset+=4)-4;if(e+4>this.array.byteLength){throw new Error("Cannot read uint32 from "+this+" at "+e+": Capacity overflow")}return this.view.getUint32(e,this.littleEndian)};i.prototype.writeFloat32=function(e,t){t=typeof t!=="undefined"?t:(this.offset+=4)-4;this.ensureCapacity(t+4);this.view.setFloat32(t,e,this.littleEndian);return this};i.prototype.readFloat32=function(e){e=typeof e!=="undefined"?e:(this.offset+=4)-4;if(this.array===null||e+4>this.array.byteLength){throw new Error("Cannot read float32 from "+this+" at "+e+": Capacity overflow")}return this.view.getFloat32(e,this.littleEndian)};i.prototype.writeFloat=i.prototype.writeFloat32;i.prototype.readFloat=i.prototype.readFloat32;i.prototype.writeFloat64=function(e,t){t=typeof t!=="undefined"?t:(this.offset+=8)-8;this.ensureCapacity(t+8);this.view.setFloat64(t,e,this.littleEndian);return this};i.prototype.readFloat64=function(e){e=typeof e!=="undefined"?e:(this.offset+=8)-8;if(this.array===null||e+8>this.array.byteLength){throw new Error("Cannot read float64 from "+this+" at "+e+": Capacity overflow")}return this.view.getFloat64(e,this.littleEndian)};i.prototype.writeDouble=i.prototype.writeFloat64;i.prototype.readDouble=i.prototype.readFloat64;if(e){i.prototype.writeInt64=function(t,n){n=typeof n!=="undefined"?n:(this.offset+=8)-8;if(!(typeof t==="object"&&t instanceof e))t=e.fromNumber(t,false);this.ensureCapacity(n+8);if(this.littleEndian){this.view.setInt32(n,t.getLowBits(),true);this.view.setInt32(n+4,t.getHighBits(),true)}else{this.view.setInt32(n,t.getHighBits(),false);this.view.setInt32(n+4,t.getLowBits(),false)}return this};i.prototype.readInt64=function(t){t=typeof t!=="undefined"?t:(this.offset+=8)-8;if(this.array===null||t+8>this.array.byteLength){this.offset-=8;throw new Error("Cannot read int64 from "+this+" at "+t+": Capacity overflow")}var n;if(this.littleEndian){n=e.fromBits(this.view.getInt32(t,true),this.view.getInt32(t+4,true),false)}else{n=e.fromBits(this.view.getInt32(t+4,false),this.view.getInt32(t,false),false)}return n};i.prototype.writeUint64=function(t,n){n=typeof n!=="undefined"?n:(this.offset+=8)-8;if(!(typeof t==="object"&&t instanceof e))t=e.fromNumber(t,true);this.ensureCapacity(n+8);if(this.littleEndian){this.view.setUint32(n,t.getLowBitsUnsigned(),true);this.view.setUint32(n+4,t.getHighBitsUnsigned(),true)}else{this.view.setUint32(n,t.getHighBitsUnsigned(),false);this.view.setUint32(n+4,t.getLowBitsUnsigned(),false)}return this};i.prototype.readUint64=function(t){t=typeof t!=="undefined"?t:(this.offset+=8)-8;if(this.array===null||t+8>this.array.byteLength){this.offset-=8;throw new Error("Cannot read int64 from "+this+" at "+t+": Capacity overflow")}var n;if(this.littleEndian){n=e.fromBits(this.view.getUint32(t,true),this.view.getUint32(t+4,true),true)}else{n=e.fromBits(this.view.getUint32(t+4,false),this.view.getUint32(t,false),true)}return n};i.prototype.writeLong=i.prototype.writeInt64;i.prototype.readLong=i.prototype.readInt64}i.MAX_VARINT32_BYTES=5;i.prototype.writeVarint32=function(e,t){var n=typeof t==="undefined";t=typeof t!=="undefined"?t:this.offset;e=e>>>0;this.ensureCapacity(t+i.calculateVarint32(e));var r=this.view,s=0;r.setUint8(t,e|128);if(e>=1<<7){r.setUint8(t+1,e>>7|128);if(e>=1<<14){r.setUint8(t+2,e>>14|128);if(e>=1<<21){r.setUint8(t+3,e>>21|128);if(e>=1<<28){r.setUint8(t+4,e>>28&127);s=5}else{r.setUint8(t+3,r.getUint8(t+3)&127);s=4}}else{r.setUint8(t+2,r.getUint8(t+2)&127);s=3}}else{r.setUint8(t+1,r.getUint8(t+1)&127);s=2}}else{r.setUint8(t,r.getUint8(t)&127);s=1}if(n){this.offset+=s;return this}else{return s}};i.prototype.readVarint32=function(e){var t=typeof e==="undefined";e=typeof e!=="undefined"?e:this.offset;var n=0,r,s=this.view;var o=0>>>0;do{r=s.getUint8(e+n);if(n<i.MAX_VARINT32_BYTES){o|=(r&127)<<7*n>>>0}++n}while(r&128);o=o|0;if(t){this.offset+=n;return o}else{return{value:o,length:n}}};i.prototype.writeZigZagVarint32=function(e,t){return this.writeVarint32(i.zigZagEncode32(e),t)};i.prototype.readZigZagVarint32=function(e){var t=this.readVarint32(e);if(typeof t==="object"){t["value"]=i.zigZagDecode32(t["value"]);return t}return i.zigZagDecode32(t)};i.MAX_VARINT64_BYTES=10;var o=1<<7;var u=o*o;var a=o*u;var f=u*u;if(e){i.prototype.writeVarint64=function(t,n){var r=typeof n==="undefined";n=typeof n!=="undefined"?n:this.offset;if(!(typeof t==="object"&&t instanceof e))t=e.fromNumber(t,false);var s=t.toInt()>>>0,o=t.shiftRightUnsigned(28).toInt()>>>0,u=t.shiftRightUnsigned(56).toInt()>>>0,a=i.calculateVarint64(t);this.ensureCapacity(n+a);var f=this.view;switch(a){case 10:f.setUint8(n+9,u>>>7|128);case 9:f.setUint8(n+8,u|128);case 8:f.setUint8(n+7,o>>>21|128);case 7:f.setUint8(n+6,o>>>14|128);case 6:f.setUint8(n+5,o>>>7|128);case 5:f.setUint8(n+4,o|128);case 4:f.setUint8(n+3,s>>>21|128);case 3:f.setUint8(n+2,s>>>14|128);case 2:f.setUint8(n+1,s>>>7|128);case 1:f.setUint8(n+0,s|128)}f.setUint8(n+a-1,f.getUint8(n+a-1)&127);if(r){this.offset+=a;return this}else{return a}};i.prototype.readVarint64=function(t){var n=typeof t==="undefined";t=typeof t!=="undefined"?t:this.offset;var r=t;var i=this.view,s,o=0,u=0,a;a=i.getUint8(t++);s=a&127;if(a&128){a=i.getUint8(t++);s|=(a&127)<<7;if(a&128){a=i.getUint8(t++);s|=(a&127)<<14;if(a&128){a=i.getUint8(t++);s|=(a&127)<<21;if(a&128){a=i.getUint8(t++);o=a&127;if(a&128){a=i.getUint8(t++);o|=(a&127)<<7;if(a&128){a=i.getUint8(t++);o|=(a&127)<<14;if(a&128){a=i.getUint8(t++);o|=(a&127)<<21;if(a&128){a=i.getUint8(t++);u=a&127;if(a&128){a=i.getUint8(t++);u|=(a&127)<<7;if(a&128){throw new Error("Data must be corrupt: Buffer overrun")}}}}}}}}}}var f=e.from28Bits(s,o,u,false);if(n){this.offset=t;return f}else{return{value:f,length:t-r}}};i.prototype.writeZigZagVarint64=function(e,t){return this.writeVarint64(i.zigZagEncode64(e),t)};i.prototype.readZigZagVarint64=function(t){var n=this.readVarint64(t);if(typeof n==="object"&&!(n instanceof e)){n["value"]=i.zigZagDecode64(n["value"]);return n}return i.zigZagDecode64(n)}}i.prototype.writeVarint=i.prototype.writeVarint32;i.prototype.readVarint=i.prototype.readVarint32;i.prototype.writeZigZagVarint=i.prototype.writeZigZagVarint32;i.prototype.readZigZagVarint=i.prototype.readZigZagVarint32;i.calculateVarint32=function(e){e=e>>>0;if(e<o){return 1}else if(e<u){return 2}else if(e<a){return 3}else if(e<f){return 4}else{return 5}};if(e){i.calculateVarint64=function(t){if(!(typeof t==="object"&&t instanceof e))t=e.fromNumber(t,false);var n=t.toInt()>>>0,r=t.shiftRightUnsigned(28).toInt()>>>0,i=t.shiftRightUnsigned(56).toInt()>>>0;if(i==0){if(r==0){if(n<u){return n<o?1:2}else{return n<a?3:4}}else{if(r<u){return r<o?5:6}else{return r<a?7:8}}}else{return i<o?9:10}}}i.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0};i.zigZagDecode32=function(e){return e>>>1^-(e&1)|0};if(e){i.zigZagEncode64=function(t){if(typeof t==="object"&&t instanceof e){if(t.unsigned)t=t.toSigned()}else{t=e.fromNumber(t,false)}return t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()};i.zigZagDecode64=function(t){if(typeof t==="object"&&t instanceof e){if(!t.unsigned)t=t.toUnsigned()}else{t=e.fromNumber(t,true)}return t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()}}i.decodeUTF8Char=function(e,t){var n=e.readUint8(t),r,i,s,o,u,a=t,f;if((n&128)==0){f=n;t+=1}else if((n&224)==192){r=e.readUint8(t+1);f=(n&31)<<6|r&63;t+=2}else if((n&240)==224){r=e.readUint8(t+1);i=e.readUint8(t+2);f=(n&15)<<12|(r&63)<<6|i&63;t+=3}else if((n&248)==240){r=e.readUint8(t+1);i=e.readUint8(t+2);s=e.readUint8(t+3);f=(n&7)<<18|(r&63)<<12|(i&63)<<6|s&63;t+=4}else if((n&252)==248){r=e.readUint8(t+1);i=e.readUint8(t+2);s=e.readUint8(t+3);o=e.readUint8(t+4);f=(n&3)<<24|(r&63)<<18|(i&63)<<12|(s&63)<<6|o&63;t+=5}else if((n&254)==252){r=e.readUint8(t+1);i=e.readUint8(t+2);s=e.readUint8(t+3);o=e.readUint8(t+4);u=e.readUint8(t+5);f=(n&1)<<30|(r&63)<<24|(i&63)<<18|(s&63)<<12|(o&63)<<6|u&63;t+=6}else{throw new Error("Cannot decode UTF8 character at offset "+t+": charCode (0x"+n.toString(16)+") is invalid")}return{"char":f,length:t-a}};i.encodeUTF8Char=function(e,t,n){var r=n;if(e<0){throw new Error("Cannot encode UTF8 character: charCode ("+e+") is negative")}if(e<128){t.writeUint8(e&127,n);n+=1}else if(e<2048){t.writeUint8(e>>6&31|192,n).writeUint8(e&63|128,n+1);n+=2}else if(e<65536){t.writeUint8(e>>12&15|224,n).writeUint8(e>>6&63|128,n+1).writeUint8(e&63|128,n+2);n+=3}else if(e<2097152){t.writeUint8(e>>18&7|240,n).writeUint8(e>>12&63|128,n+1).writeUint8(e>>6&63|128,n+2).writeUint8(e&63|128,n+3);n+=4}else if(e<67108864){t.writeUint8(e>>24&3|248,n).writeUint8(e>>18&63|128,n+1).writeUint8(e>>12&63|128,n+2).writeUint8(e>>6&63|128,n+3).writeUint8(e&63|128,n+4);n+=5}else if(e<2147483648){t.writeUint8(e>>30&1|252,n).writeUint8(e>>24&63|128,n+1).writeUint8(e>>18&63|128,n+2).writeUint8(e>>12&63|128,n+3).writeUint8(e>>6&63|128,n+4).writeUint8(e&63|128,n+5);n+=6}else{throw new Error("Cannot encode UTF8 character: charCode (0x"+e.toString(16)+") is too large (>= 0x80000000)")}return n-r};i.calculateUTF8Char=function(e){if(e<0){throw new Error("Cannot calculate length of UTF8 character: charCode ("+e+") is negative")}if(e<128){return 1}else if(e<2048){return 2}else if(e<65536){return 3}else if(e<2097152){return 4}else if(e<67108864){return 5}else if(e<2147483648){return 6}else{throw new Error("Cannot calculate length of UTF8 character: charCode (0x"+e.toString(16)+") is too large (>= 0x80000000)")}};i.calculateUTF8String=function(e){e=""+e;var t=0;for(var n=0,r=e.length;n<r;++n){t+=i.calculateUTF8Char(e.charCodeAt(n))}return t};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l=l+"";i.encode64=function(e){if(!(e instanceof i)){e=i.wrap(e)}else if(e.length<e.offset){e=e.clone().flip()}var t,n,r,s,o,u,a,f,c=e.offset,h=0,p=[];do{t=e.readUint8(c++);n=e.length>c?e.readUint8(c++):0;r=e.length>c?e.readUint8(c++):0;f=t<<16|n<<8|r;s=f>>18&63;o=f>>12&63;u=f>>6&63;a=f&63;p[h++]=l.charAt(s)+l.charAt(o)+l.charAt(u)+l.charAt(a)}while(c<e.length);var d=p.join(""),v=(e.length-e.offset)%3;return(v?d.slice(0,v-3):d)+"===".slice(v||3)};i.decode64=function(e,t){if(typeof e!=="string"){throw new Error("Illegal argument: Not a string")}var n,r,s,o,u,a,f,c,h=0,p=new i(Math.ceil(e.length/3),t);do{o=l.indexOf(e.charAt(h++));u=l.indexOf(e.charAt(h++));a=l.indexOf(e.charAt(h++));f=l.indexOf(e.charAt(h++));if(o<0||u<0||a<0||f<0){throw new Error("Illegal argument: Not a valid base64 encoded string")}c=o<<18|u<<12|a<<6|f;n=c>>16&255;r=c>>8&255;s=c&255;if(a==64){p.writeUint8(n)}else if(f==64){p.writeUint8(n).writeUint8(r)}else{p.writeUint8(n).writeUint8(r).writeUint8(s)}}while(h<e.length);return p.flip()};i.encodeHex=function(e){if(!(e instanceof i)){e=i.wrap(e)}else if(e.length<e.offset){e=e.clone().flip()}if(e.array===null)return"";var t,n=[];for(var r=e.offset,s=e.length;r<s;++r){t=e.view.getUint8(r).toString(16).toUpperCase();if(t.length<2)t="0"+t;n.push(t)}return n.join("")};i.decodeHex=function(e,t){if(typeof e!=="string"){throw new Error("Illegal argument: Not a string")}if(e.length%2!==0){throw new Error("Illegal argument: Not a hex encoded string")}var n,r=new i(e.length/2,t);for(var s=0,o=e.length;s<o;s+=2){r.writeUint8(parseInt(e.substring(s,s+2),16))}return r.flip()};i.encodeBinary=function(e){if(!(e instanceof i)){e=i.wrap(e)}else if(e.length<e.offset){e=e.clone().flip()}var t=[],n=e.view;for(var r=e.offset,s=e.length;r<s;++r){t.push(String.fromCharCode(n.getUint8(r)))}return t.join("")};i.decodeBinary=function(e,t){if(typeof e!=="string"){throw new Error("Illegal argument: Not a string")}var n=e.length,r=new ArrayBuffer(n),s=new DataView(r),o;for(var u=0;u<n;++u){if((o=e.charCodeAt(u))>255)throw new Error("Illegal argument: Not a binary string (char code "+o+")");s.setUint8(u,o)}var a=new i(n,t,true);a.array=r;a.view=s;a.length=n;return a};i.prototype.writeUTF8String=function(e,t){var n=typeof t==="undefined";t=typeof t!=="undefined"?t:this.offset;var r=t;var s=i.calculateUTF8String(e);this.ensureCapacity(t+s);for(var o=0,u=e.length;o<u;++o){t+=i.encodeUTF8Char(e.charCodeAt(o),this,t)}if(n){this.offset=t;return this}else{return t-r}};i.prototype.readUTF8String=function(e,t){var n=typeof t==="undefined";t=typeof t!=="undefined"?t:this.offset;var r,s="",o=t;for(var u=0;u<e;++u){r=i.decodeUTF8Char(this,t);t+=r["length"];s+=String.fromCharCode(r["char"])}if(n){this.offset=t;return s}else{return{string:s,length:t-o}}};i.prototype.readUTF8StringBytes=function(e,t){var n=typeof t==="undefined";t=typeof t!=="undefined"?t:this.offset;var r,s="",o=t;e=t+e;while(t<e){r=i.decodeUTF8Char(this,t);t+=r["length"];s+=String.fromCharCode(r["char"])}if(t!=e){throw new Error("Actual string length differs from the specified: "+((t>e?"+":"")+t-e)+" bytes")}if(n){this.offset=t;return s}else{return{string:s,length:t-o}}};i.prototype.writeLString=function(e,t){e=""+e;var n=typeof t==="undefined";t=typeof t!=="undefined"?t:this.offset;var r=i.encodeUTF8Char(e.length,this,t);r+=this.writeUTF8String(e,t+r);if(n){this.offset+=r;return this}else{return r}};i.prototype.readLString=function(e){var t=typeof e==="undefined";e=typeof e!=="undefined"?e:this.offset;var n=i.decodeUTF8Char(this,e),r=this.readUTF8String(n["char"],e+n["length"]);if(t){this.offset+=n["length"]+r["length"];return r["string"]}else{return{string:r["string"],length:n["length"]+r["length"]}}};i.prototype.writeVString=function(e,t){e=""+e;var n=typeof t==="undefined";t=typeof t!=="undefined"?t:this.offset;var r=this.writeVarint32(i.calculateUTF8String(e),t);r+=this.writeUTF8String(e,t+r);if(n){this.offset+=r;return this}else{return r}};i.prototype.readVString=function(e){var t=typeof e==="undefined";e=typeof e!=="undefined"?e:this.offset;var n=this.readVarint32(e);var r=this.readUTF8StringBytes(n["value"],e+n["length"]);if(t){this.offset+=n["length"]+r["length"];return r["string"]}else{return{string:r["string"],length:n["length"]+r["length"]}}};i.prototype.writeCString=function(e,t){e=""+e;var n=typeof t==="undefined";t=typeof t!=="undefined"?t:this.offset;var r=this.writeUTF8String(e,t);this.writeUint8(0,t+r);if(n){this.offset+=r+1;return this}else{return r+1}};i.prototype.readCString=function(e){var t=typeof e==="undefined";e=typeof e!=="undefined"?e:this.offset;var n,r="",s=e;do{n=i.decodeUTF8Char(this,e);e+=n["length"];if(n["char"]!=0)r+=String.fromCharCode(n["char"])}while(n["char"]!=0);if(t){this.offset=e;return r}else{return{string:r,length:e-s}}};i.prototype.writeJSON=function(e,t,n){n=typeof n==="function"?n:JSON.stringify;return this.writeLString(n(e),t)};i.prototype.readJSON=function(e,t){t=typeof t==="function"?t:JSON.parse;var n=this.readLString(e);if(typeof n==="string"){return t(n)}else{return{data:t(n["string"]),length:n["length"]}}};i.prototype.toColumns=function(e){if(this.array===null)return"DESTROYED";e=typeof e!=="undefined"?parseInt(e,10):16;if(e<1)e=16;var t="",n=[],r,i=this.view;if(this.offset==0&&this.length==0){t+="|"}else if(this.length==0){t+=">"}else if(this.offset==0){t+="<"}else{t+=" "}for(var s=0,o=this.array.byteLength;s<o;++s){if(s>0&&s%e==0){while(t.length<3*e+1)t+="   ";n.push(t);t=" "}r=i.getUint8(s).toString(16).toUpperCase();if(r.length<2)r="0"+r;t+=r;if(s+1==this.offset&&s+1==this.length){t+="|"}else if(s+1==this.offset){t+="<"}else if(s+1==this.length){t+=">"}else{t+=" "}}if(t!=" "){n.push(t)}for(s=0,o=n.length;s<o;++s){while(n[s].length<3*e+1)n[s]+="   "}var u=0;t="";for(s=0,o=this.array.byteLength;s<o;++s){if(s>0&&s%e==0){n[u]+=" "+t;t="";u++}r=i.getUint8(s);t+=r>32&&r<127?String.fromCharCode(r):"."}if(t!=""){n[u]+=" "+t}return n.join("\n")};i.prototype.printDebug=function(e){if(typeof e!=="function")e=console.log.bind(console);e((this.array!=null?"ByteBuffer(offset="+this.offset+",markedOffset="+this.markedOffset+",length="+this.length+",capacity="+this.array.byteLength+")":"ByteBuffer(DESTROYED)")+"\n"+"-------------------------------------------------------------------\n"+this.toColumns()+"\n")};i.prototype.toHex=function(e){var t="",n,r=this.view,s,o;if(!e){return i.encodeHex(this)}else{if(this.array===null)return"DESTROYED";if(this.offset==0&&this.length==0){t+="|"}else if(this.length==0){t+=">"}else if(this.offset==0){t+="<"}else{t+=" "}for(s=0,o=this.array.byteLength;s<o;++s){n=r.getUint8(s).toString(16).toUpperCase();if(n.length<2)n="0"+n;t+=n;if(s+1===this.offset&&s+1===this.length){t+="|"}else if(s+1==this.offset){t+="<"}else if(s+1==this.length){t+=">"}else{t+=" "}}return t}};i.prototype.toBinary=function(){return i.encodeBinary(this)};i.prototype.toBase64=function(){if(this.array===null||this.offset>=this.length)return"";return i.encode64(this)};i.prototype.toUTF8=function(){if(this.array===null||this.offset>=this.length)return"";return this.readUTF8StringBytes(this.length-this.offset,this.offset)["string"]};i.prototype.toString=function(e){e=e||"";switch(e){case"utf8":return this.toUTF8();case"base64":return this.toBase64();case"hex":return this.toHex();case"binary":return this.toBinary();case"debug":return this.toHex(true);default:if(this.array===null){return"ByteBuffer(DESTROYED)"}return"ByteBuffer(offset="+this.offset+",markedOffset="+this.markedOffset+",length="+this.length+",capacity="+this.array.byteLength+")"}};i.prototype.toArrayBuffer=function(e){if(this.array===null)return null;var t=this.clone();if(t.offset>t.length){t.flip()}var n=false;if(t.offset>0||t.length<t.array.byteLength){t.compact();n=true}return e&&!n?t.copy().array:t.array};if(t){i.prototype.toBuffer=function(){if(this.array===null)return null;var e=this.offset,n=this.length;if(e>n){var r=e;e=n;n=r}return new t((new Uint8Array(this.array)).subarray(e,n))}}return i}if(typeof module!=="undefined"&&module["exports"]){module["exports"]=t(require("long"))}else if(typeof define!=="undefined"&&define["amd"]){define("ByteBuffer",["Math/Long"],function(e){return t(e)})}else{if(!e["dcodeIO"])e["dcodeIO"]={};e["dcodeIO"]["ByteBuffer"]=t(e["dcodeIO"]["Long"])}})(this)